<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lista de Compras</title>

    <style>
      * {
        padding: 5px;
      }
    </style>
    <script>
     var arrayCompras = [];
     

function adicionar() {

  let produto = {
  nome: document.formulario.nomeProduto.value,
  preco: document.formulario.valorProduto.value,
  mostrar: function () {
    return this.nome + " -> " + this.preco + " €" + "\n"
  }
}
    
    const productAlreadyExists = arrayCompras.find(compra => compra.nome === produto.nome);
    if (produto.nome!= "" && !productAlreadyExists) {
        
        arrayCompras.push(produto);
    }
    document.formulario.nomeProduto.value = "";
    document.formulario.valorProduto.value = "";
}


function mostrar() {

  document.formulario.listaProdutos.value = "";
  for (var compra of arrayCompras) {
    document.formulario.listaProdutos.value += compra.mostrar();
  }
  document.formulario.listaProdutos.value += `\n\nNúmero Total de Produtos: ${arrayCompras.length};`;
}
    </script>
  </head>

  <body>
    <form name="formulario">
      <input type="text" name="nomeProduto" placeholder="Produto" />
      <input type="number" name="valorProduto" placeholder="Preço" />
      <input type="button" value="Adicionar Produto" onclick="adicionar();mostrar()" />
    
      <br />
      <br />
      <textarea name="listaProdutos" cols="40" rows="10" readonly></textarea>
    </form>
    
  </body>
</html>
